<!DOCTYPE html>
<html>
<head>
    <title>Cognitive Engine</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* Simple, clean styles */
        body {
            font-family: Arial, sans-serif;
            background: #0a0a0f;
            color: white;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        .header {
            background: linear-gradient(90deg, #ff2e63, #aa00ff);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
        }
        textarea {
            width: 100%;
            height: 200px;
            background: #1a1a25;
            color: white;
            border: 2px solid #2a2a40;
            border-radius: 10px;
            padding: 15px;
            font-size: 16px;
            margin-bottom: 15px;
            resize: vertical;
        }
        .buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        button {
            background: #ff2e63;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            flex: 1;
        }
        .secondary {
            background: #2a2a40;
        }
        .stats {
            background: #121218;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            gap: 20px;
        }
        .dashboard {
            display: none;
        }
        .card {
            background: #121218;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
        }
        .pattern-item {
            background: #1a1a25;
            padding: 12px;
            margin: 8px 0;
            border-radius: 8px;
            border-left: 4px solid #ff2e63;
        }
        .marker {
            display: inline-block;
            background: #aa00ff;
            color: white;
            padding: 4px 10px;
            margin: 3px;
            border-radius: 15px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Cognitive Insight Engine</h1>
            <p>Analyze psychological patterns in text</p>
        </div>
        
        <textarea id="textInput">I always feel like I should be doing better, but nothing ever feels good enough.</textarea>
        
        <div class="buttons">
            <button id="analyzeBtn">Analyze</button>
            <button id="exampleBtn" class="secondary">Example</button>
            <button id="clearBtn" class="secondary">Clear</button>
        </div>
        
        <div class="stats">
            <div>Words: <span id="wordCount">0</span></div>
            <div>Markers: <span id="markerCount">0</span></div>
        </div>
        
        <div class="dashboard" id="dashboard">
            <div class="card">
                <h3>Patterns Found</h3>
                <div id="patternsList"></div>
            </div>
            
            <div class="card">
                <h3>Insights</h3>
                <div id="insightsList"></div>
            </div>
            
            <div class="card">
                <h3>Markers</h3>
                <div id="markersList"></div>
            </div>
        </div>
    </div>

    <script>
        // Simple Knowledge Base
        const knowledgeBase = {
            words: {
                'always': 'absolutist',
                'never': 'absolutist', 
                'should': 'imperative',
                'must': 'imperative',
                'failure': 'self_critic',
                'disaster': 'catastrophizing',
                'terrible': 'catastrophizing',
                'my fault': 'personalization'
            },
            
            patterns: {
                'absolutist': 'All-or-Nothing Thinking',
                'imperative': 'Should/Must Thinking',
                'self_critic': 'Self-Criticism',
                'catastrophizing': 'Catastrophizing',
                'personalization': 'Personalization'
            }
        };

        // Initialize DOM elements
        const textInput = document.getElementById('textInput');
        const analyzeBtn = document.getElementById('analyzeBtn');
        const exampleBtn = document.getElementById('exampleBtn');
        const clearBtn = document.getElementById('clearBtn');
        const wordCountEl = document.getElementById('wordCount');
        const markerCountEl = document.getElementById('markerCount');
        const dashboard = document.getElementById('dashboard');
        const patternsList = document.getElementById('patternsList');
        const insightsList = document.getElementById('insightsList');
        const markersList = document.getElementById('markersList');

        // Update word count
        function updateStats() {
            const text = textInput.value;
            const words = text.trim() === '' ? 0 : text.split(/\s+/).length;
            wordCountEl.textContent = words;
            
            // Count markers
            let markerCount = 0;
            Object.keys(knowledgeBase.words).forEach(word => {
                const regex = new RegExp('\\b' + word + '\\b', 'gi');
                const matches = text.match(regex);
                if (matches) markerCount += matches.length;
            });
            markerCountEl.textContent = markerCount;
        }

        // Analyze function
        function analyzeText() {
            const text = textInput.value.trim();
            
            if (text.length < 10) {
                alert('Please enter at least 10 characters.');
                return;
            }
            
            // Reset display
            patternsList.innerHTML = '';
            insightsList.innerHTML = '';
            markersList.innerHTML = '';
            
            // Find markers
            const foundMarkers = [];
            Object.keys(knowledgeBase.words).forEach(word => {
                const regex = new RegExp('\\b' + word + '\\b', 'gi');
                const matches = text.match(regex);
                if (matches) {
                    matches.forEach(() => {
                        foundMarkers.push({
                            word: word,
                            category: knowledgeBase.words[word]
                        });
                    });
                }
            });
            
            // Group by category
            const categories = {};
            foundMarkers.forEach(marker => {
                const cat = marker.category;
                if (!categories[cat]) {
                    categories[cat] = {
                        count: 0,
                        markers: []
                    };
                }
                categories[cat].count++;
                if (!categories[cat].markers.includes(marker.word)) {
                    categories[cat].markers.push(marker.word);
                }
            });
            
            // Display patterns
            Object.keys(categories).forEach(cat => {
                const item = document.createElement('div');
                item.className = 'pattern-item';
                item.innerHTML = '<strong>' + knowledgeBase.patterns[cat] + '</strong><br>' + 
                               'Count: ' + categories[cat].count + '<br>' +
                               'Markers: ' + categories[cat].markers.join(', ');
                patternsList.appendChild(item);
            });
            
            if (Object.keys(categories).length === 0) {
                patternsList.innerHTML = '<div class="pattern-item">No patterns detected</div>';
            }
            
            // Display insights
            const insights = [];
            
            if (foundMarkers.length > 0) {
                insights.push('Found ' + foundMarkers.length + ' cognitive markers');
            }
            
            if (categories['absolutist']) {
                insights.push('All-or-nothing thinking pattern detected');
            }
            
            if (categories['imperative']) {
                insights.push('"Should" statements indicate pressure');
            }
            
            if (categories['self_critic']) {
                insights.push('Self-critical language detected');
            }
            
            insights.forEach(insight => {
                const item = document.createElement('div');
                item.className = 'pattern-item';
                item.textContent = insight;
                insightsList.appendChild(item);
            });
            
            if (insights.length === 0) {
                insightsList.innerHTML = '<div class="pattern-item">No insights generated</div>';
            }
            
            // Display markers
            foundMarkers.forEach(marker => {
                const span = document.createElement('span');
                span.className = 'marker';
                span.textContent = marker.word;
                markersList.appendChild(span);
            });
            
            if (foundMarkers.length === 0) {
                markersList.innerHTML = '<div class="pattern-item">No markers found</div>';
            }
            
            // Show dashboard
            dashboard.style.display = 'block';
        }

        // Example function
        function loadExample() {
            const examples = [
                "I always feel like I should be doing more, but nothing ever feels good enough.",
                "Everything has to be perfect or it's completely worthless.",
                "I'm never going to succeed at this rate. It's probably all my fault.",
                "They probably think I'm incompetent. I should have done better."
            ];
            
            const randomIndex = Math.floor(Math.random() * examples.length);
            textInput.value = examples[randomIndex];
            updateStats();
            analyzeText();
        }

        // Clear function
        function clearText() {
            textInput.value = '';
            updateStats();
            dashboard.style.display = 'none';
        }

        // Event listeners
        textInput.addEventListener('input', updateStats);
        analyzeBtn.addEventListener('click', analyzeText);
        exampleBtn.addEventListener('click', loadExample);
        clearBtn.addEventListener('click', clearText);

        // Keyboard shortcut
        document.addEventListener('keydown', function(e) {
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                e.preventDefault();
                analyzeText();
            }
        });

        // Initial setup
        updateStats();
        
        // Auto-analyze on load
        setTimeout(analyzeText, 100);
    </script>
</body>
</html>
